{% extends "admin/change_list.html" %}

{# Inject totals inside the results table as a footer row #}
{% block result_list %}
  {{ block.super }}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const tbl = document.getElementById('result_list');
      if (!tbl) return;
      const tfoot = tbl.tFoot || tbl.createTFoot();
      // Clear any existing footer rows to avoid duplication on turbo reloads
      while (tfoot.firstChild) tfoot.removeChild(tfoot.firstChild);
      const row = tfoot.insertRow(0);
      const cols = (tbl.tHead && tbl.tHead.rows[0]) ? tbl.tHead.rows[0].cells.length : tbl.rows[0].cells.length;
      const cell = row.insertCell(0);
      cell.colSpan = cols;
      cell.style.textAlign = 'right';
      cell.style.fontWeight = '600';
      cell.innerHTML = `
        <span>Total Credit:</span> ₦{{ total_credit }}&nbsp;&nbsp;
        <span>Total Debit:</span> ₦{{ total_debit }}
      `;
    });
  </script>
{% endblock %}
